(function(){var t,e,n,i=function(t,e){return function(){return t.apply(e,arguments)}},a=[].slice,r={}.hasOwnProperty;window.APISandbox={},APISandbox.Command=t=t=function(){function t(){var t,e,n;e=arguments[0],t=arguments[1],n=3<=arguments.length?a.call(arguments,2):[],this.objectName=e,this.method=t,this.parameters=n,this.methodName=i(this.methodName,this),this.constructorName=i(this.constructorName,this),this.apply=i(this.apply,this)}return t.prototype.apply=function(t){var e,n,i,a,r;return r=t.copy(),r.command=this,null===r.environment&&(r.environment=t.environment,t.environment=null),a=function(){var e,n,a,r;for(a=this.parameters,r=[],e=0,n=a.length;n>e;e++)i=a[e],r.push("name"in i?t.environment[i.name]:i.value);return r}.call(this),a.push(r.environment),null!=this.objectName&&a.unshift(this.objectName),n=!this.objectName||this.objectName in r.environment?this.method.apply(null,a):"This command was formerly run on "+this.objectName+", which no longer exists due to changes made up above.",n instanceof window.Node||(e=APISandbox.div.ownerDocument.createElement("div"),e.innerHTML=""+n,n=e),e=APISandbox.div.ownerDocument.createElement("div"),e.setAttribute("class","command-result"),e.appendChild(n),r.element=e,r},t.prototype.constructorName=function(){var t,e,n,i;i=null!=(n=APISandbox.data.constructors)?n:{};for(e in i)if(r.call(i,e)&&(t=i[e],t.call===this.method))return e;return null},t.prototype.methodName=function(){var t,e,n,i,a,o;o=null!=(a=APISandbox.data.members)?a:{};for(e in o)if(r.call(o,e)){t=o[e];for(i in t)if(r.call(t,i)&&(n=t[i],n.call===this.method))return{className:e,phrase:i}}return null},t}(),APISandbox.State=n=n=function(){function t(t){this.command=null!=t?t:null,this.copy=i(this.copy,this),this.computeObjectsInClass=i(this.computeObjectsInClass,this),this.environment={},this.element=null,this.objectsInClass=null}return t.prototype.computeObjectsInClass=function(){var t,e,n,i,a,o;if(null===this.environment)return this.objectsInClass=null;if(null===this.objectsInClass){this.objectsInClass={},a=this.environment,o=[];for(i in a)r.call(a,i)&&(n=a[i],o.push(function(){var a,o,l,s,c;s=null!=(o=null!=(l=APISandbox.data)?l.classes:void 0)?o:{},c=[];for(t in s)if(r.call(s,t)){if(e=s[t],e.isAnInstance(n)){(null!=(a=this.objectsInClass)[t]?a[t]:a[t]=[]).push(i);break}c.push(void 0)}return c}.call(this)));return o}},t.prototype.copy=function(){var e,n,i,a,o,l;i=new t,o=this.environment;for(n in o)if(r.call(o,n)){a=o[n];try{i.environment[n]=null!=(l=null!=a&&"function"==typeof a.copy?a.copy():void 0)?l:JSON.parse(JSON.stringify(a))}catch(s){e=s,i.environment=null;break}}return i},t}(),APISandbox.History=e=e=function(){function e(){this.deserialize=i(this.deserialize,this),this.serialize=i(this.serialize,this),this.duplicateAction=i(this.duplicateAction,this),this.deleteAction=i(this.deleteAction,this),this.changeAction=i(this.changeAction,this),this.rewriteHistory=i(this.rewriteHistory,this),this.appendAction=i(this.appendAction,this),this.states=[APISandbox.initialState()]}return e.prototype.appendAction=function(t){return this.states.push(t.apply(this.states[this.states.length-1]))},e.prototype.rewriteHistory=function(t,e){var n,i,a,r,o,l,s,c,u,d;if(!(0>=t)){if(o=function(){var e,n,i,a;for(i=this.states.splice(t),a=[],e=0,n=i.length;n>e;e++)r=i[e],a.push(r.command);return a}.call(this),null===this.states[t-1].environment)for(this.states[0]=APISandbox.initialState(),i=l=1;t>=1?t>l:l>t;i=t>=1?++l:--l)this.states[i]=this.states[i].command.apply(this.states[i-1]);for(a=this.states[t-1],u=e(o),d=[],s=0,c=u.length;c>s;s++)n=u[s],d.push(this.states.push(a=n.apply(a)));return d}},e.prototype.changeAction=function(t,e){return this.rewriteHistory(t,function(t){return[e].concat(a.call(t.slice(1)))})},e.prototype.deleteAction=function(t){return this.rewriteHistory(t,function(t){return t.slice(1)})},e.prototype.duplicateAction=function(t){return this.rewriteHistory(t,function(t){return[t[0]].concat(a.call(t))})},e.prototype.serialize=function(){var t,e,n;return t=function(){var t,i,r,o;for(r=this.states.slice(1),o=[],t=0,i=r.length;i>t;t++)n=r[t],null!=n.command.objectName?(e=n.command.methodName(),o.push(["m "+n.command.objectName,e.className,e.phrase].concat(a.call(n.command.parameters)))):o.push(["c "+n.command.constructorName()].concat(a.call(n.command.parameters)));return o}.call(this),JSON.stringify(t)},e.prototype.deserialize=function(e){var n,i,r,o,l,s,c,u,d,h,m;for(this.states=[APISandbox.initialState()],h=JSON.parse(e),m=[],u=0,d=h.length;d>u;u++)o=h[u],i="m "===o[0].slice(0,2)?(s=o[0].slice(2),n=o[1],l=o[2],c=o.slice(3),function(t,e,n){n.prototype=t.prototype;var i=new n,a=t.apply(i,e);return Object(a)===a?a:i}(t,[s,APISandbox.data.members[n][l].call].concat(a.call(c)),function(){})):(r=o[0].slice(2),c=o.slice(1),function(t,e,n){n.prototype=t.prototype;var i=new n,a=t.apply(i,e);return Object(a)===a?a:i}(t,[null,APISandbox.data.constructors[r].call].concat(a.call(c)),function(){})),m.push(this.appendAction(i));return m},e}(),APISandbox.setup=function(t,n){var i;for(this.div=t,null==n&&(n=""),null==this.data&&(this.data={}),i=(this.history=new e).states[0],i.DOM=this.div.ownerDocument.createElement("div"),i.DOM.innerHTML=n;this.div.hasChildNodes();)this.div.removeChild(this.div.lastChild);return this.div.appendChild(i.DOM),this.div.appendChild(this.createCommandUI(1)),this.handlePermalink()},APISandbox.addClass=function(t,e,n){var i;return(null!=(i=null!=this.data?this.data:this.data={}).classes?i.classes:i.classes={})[t]={description:e,isAnInstance:n}},APISandbox.addConstructor=function(){var t,e,n,i;return n=arguments[0],t=arguments[1],e=3<=arguments.length?a.call(arguments,2):[],(null!=(i=null!=this.data?this.data:this.data={}).constructors?i.constructors:i.constructors={})[n]={call:t,parameters:e}},APISandbox.addMethod=function(){var t,e,n,i,r,o;return t=arguments[0],i=arguments[1],e=arguments[2],n=4<=arguments.length?a.call(arguments,3):[],null==(r=null!=this.data?this.data:this.data={}).members&&(r.members={}),(null!=(o=this.data.members)[t]?o[t]:o[t]={})[i]={call:e,parameters:n}},APISandbox.addGlobal=function(t,e,n){var i;return(null!=(i=null!=this.data?this.data:this.data={}).globals?i.globals:i.globals={})[t]={description:e,value:n}},APISandbox.initialState=function(){var t,e,i,a,o,l;e=new n,l=null!=(a=null!=(o=this.data)?o.globals:void 0)?a:{};for(t in l)r.call(l,t)&&(i=l[t],e.environment[t]=i.value);return e},APISandbox.permalink=function(){var t;return t=window.location.href.split("?")[0],""+t+"?"+encodeURIComponent(this.history.serialize())},APISandbox.inputWidget=function(t,e,n){var i,a,o,l,s,c,u,d,h,m,p,f,v,b,g,y,A,w,I,S;return w=n.type,c="input-"+t+"-"+e,u="id='"+c+"'","object:"===(null!=w?w.slice(0,7):void 0)?(o=w.slice(7),w="object"):o=null,y=function(){var e,s,c;switch(w){case"integer":case"float":case"string":case"short string":return"<input type='text' "+u+" width=40 class='form-control' value='"+(null!=(e=n.defaultValue)?e:"")+"'/>";case"boolean":return f=n.defaultValue?"selected":"","<input type='checkbox' "+u+" "+f+" class='form-control'/>";case"choice":case"object":if("choice"===w)a=n.values;else{A=null!=(s=this.history.states[t-1])?s.objectsInClass:void 0,a=[],c=null!=A?A:{};for(l in c)r.call(c,l)&&(p=c[l],(null==o||o===l)&&(a=a.concat(p)))}return a=function(){var t,e,n;for(n=[],t=0,e=a.length;e>t;t++)i=a[t],n.push("<option value='"+i+"'>"+i+"</option>");return n}(),("<select "+u+" class='form-control'>"+a.join("")+" </select>").replace("value='"+n.defaultValue+"'","value='"+n.defaultValue+"' selected");case"JSON":case"long string":return"<textarea rows=6 cols=40 class='form-control' "+u+">"+n.defaultValue+"</textarea>"}}.call(this),g=this.div.ownerDocument.createElement("tr"),g.innerHTML="<td align='right' width='35%'><label >"+n.name+"</label></td><td width='65%'>"+y+" &nbsp; <span id='"+c+"-notifications'></span></td>",S=n.validator,("integer"===w||"float"===w)&&(m=S,"integer"===w?(b=/^[+-]?[0-9]+$/,s=parseInt,v="an integer"):(b=/^[+-]?[0-9]*\.?[0-9]+|[+-]?[0-9]+\.[0-9]*$/,s=parseFloat,v="a float"),S=function(t){var e;return b.test(t)?(e=s(t),null!=n.min&&n.min>e?{valid:!1,message:"The minimum is "+n.min+"."}:null!=n.max&&n.max<e?{valid:!1,message:"The maximum is "+n.max+"."}:"function"==typeof m?m(e):void 0):{valid:!1,message:"This is not "+v+"."}}),d=$("#"+c,g),h=$("#"+c+"-notifications",g),I=function(t){return function(){var t,e,n,i;return t="function"==typeof S?S($(d).val()):void 0,(null!=t?t.valid:void 0)===!1?(h.get(0).innerHTML="<font color=red>"+(null!=(e=null!=t?t.message:void 0)?e:"")+"</font>",d.get(0).setAttribute("data-invalid",null!=(n=null!=t?t.message:void 0)?n:"--")):(h.get(0).innerHTML=null!=(i=null!=t?t.message:void 0)?i:"",d.get(0).removeAttribute("data-invalid"))}}(this),d.change(I),d.keyup(I),setTimeout(I,0),d.addClass("command-ui-input"),null!=n.defaultValue&&d.val(n.defaultValue),g},APISandbox.readDataFrom=function(t){return $(t).val()},APISandbox.writeDataTo=function(t,e){return $(t).val(e)},APISandbox.readAll=function(t){var e,n,i,a;for(a=[],e=0;(i=$("#input-"+t+"-"+e)).length>0;){if(n=i.get(0).getAttribute("data-invalid"))throw n;a.push(i.val()),e++}return a},APISandbox.writeAll=function(t){var e,n,i,a,r,o,l,s,c;for(o=this.history.states[t].command.parameters,c=[],e=a=0,r=o.length;r>a;e=++a)n=o[e],i=$("#input-"+t+"-"+e),i.val(null!=(l=null!=(s=n.name)?s:n.value)?l:n),c.push(i.change());return c},APISandbox.restoreSelects=function(t){var e,n,i,a,r,o,l,s;if(n=this.history.states[t].command,t<this.history.states.length?($("#delete-command-"+t).show(),$("#duplicate-command-"+t).show()):($("#delete-command-"+t).hide(),$("#duplicate-command-"+t).hide()),e=$("#ctor-select-"+t),a=$("#method-select-"+t),null!=n.objectName){for(s=e.get(0).childNodes,o=0,l=s.length;l>o;o++)if(r=s[o],r.getAttribute("data-object-name")===n.objectName){e.val(r.getAttribute("value")),e.change();break}if(a.show(),null!=(i=n.methodName()))return a.val(i.phrase),void a.change()}return e.val(n.constructorName()),e.change(),a.hide()},APISandbox.tableForFunction=function(t,e,n){var i,a,r,o,l,s,c,u,d,h,m,p;for(i=e?null!=(u=this.data.members)&&null!=(d=u[e])?d[n]:void 0:null!=(h=this.data.constructors)?h[n]:void 0,o=this.div.ownerDocument.createElement("div"),l=this.div.ownerDocument.createElement("table"),l.style.borderSpacing="10px",l.style.borderCollapse="separate",l.setAttribute("width","100%"),o.appendChild(l),p=null!=(m=null!=i?i.parameters:void 0)?m:{},a=s=0,c=p.length;c>s;a=++s)r=p[a],l.appendChild(this.inputWidget(t,a,r));return o},APISandbox.createCommandUI=function(t){var e,n,i,r,o,l,s,c,u,d,h,m,p,f,v,b,g,y,A,w,I,S,x,C,N,P,j,E,k,D;null!=(P=this.history.states[t-1])&&"function"==typeof P.computeObjectsInClass&&P.computeObjectsInClass(),v=this.div.ownerDocument.createElement("div"),v.setAttribute("class","command-ui"),v.setAttribute("id","command-ui-"+t),v.innerHTML="<select id='ctor-select-"+t+"' class='form-control' style='width: 80%;'></select>",g=$("#ctor-select-"+t,v),k=null!=(j=null!=(E=this.history.states[t-1])?E.objectsInClass:void 0)?j:{};for(e in k)for(m=k[e],C=0,N=m.length;N>C;C++)h=m[C],p=this.div.ownerDocument.createElement("option"),p.setAttribute("value",e),p.setAttribute("data-object-name",h),p.innerHTML="With the "+e+" "+h+",",v.childNodes[0].appendChild(p);D=this.data.constructors;for(f in D)n=D[f],p=this.div.ownerDocument.createElement("option"),p.setAttribute("value",p.innerHTML=f),v.childNodes[0].appendChild(p);return 0===g.get(0).childNodes.length?v:(d=this.div.ownerDocument.createElement("select"),d.setAttribute("id","method-select-"+t),d.setAttribute("class","form-control"),d.style.width="80%",g.after(d),u=function(){return $(d).hide()},w=function(){return $(d).show()},u(),o=function(t){return function(e){for(var i,a,r;d.childNodes.length>0;)d.removeChild(d.childNodes[0]);r=null!=(i=(null!=(a=t.data.members)?a:{})[e])?i:{};for(f in r)n=r[f],p=t.div.ownerDocument.createElement("option"),p.setAttribute("value",p.innerHTML=f),d.appendChild(p),1===d.childNodes.length&&$(d).val(f);return 0===d.childNodes.length?(p=t.div.ownerDocument.createElement("option"),p.setAttribute("value",""),p.innerHTML="there is nothing you can do",d.appendChild(p),$(d).val("")):void 0}}(this),I=this.div.ownerDocument.createElement("div"),I.setAttribute("id","parameters-for-"+t),v.appendChild(I),v.appendChild(b=this.div.ownerDocument.createElement("div")),b.innerHTML="<input type='button' value='Apply' class='btn btn-default btn-primary' id='apply-button-"+t+"'/> <input type='button' value='Cancel' class='btn btn-default btn-warning' id='cancel-button-"+t+"'/>",b.style.textAlign="right",y=function(){return $("#apply-button-"+t,v).show()},s=function(){return $("#apply-button-"+t,v).hide()},A=function(){return $("#cancel-button-"+t,v).show()},c=function(){return $("#cancel-button-"+t,v).hide()},c(),S=function(e){return function(n){return $(I).replaceWith(n),n.setAttribute("id","parameters-for-"+t),I=n,$(".command-ui-input",v).change(function(){var n;return y(),null!=(null!=(n=e.history.states[t])?n.command:void 0)?A():void 0}),$(".command-ui-input",v).keyup(function(){var n;return y(),null!=(null!=(n=e.history.states[t])?n.command:void 0)?A():void 0})}}(this),$(d).change(function(e){return function(){var n,i;return n=$(d).val(),S(e.tableForFunction(t,g.val(),n)),""===n?(s(),c()):(y(),null!=(null!=(i=e.history.states[t])?i.command:void 0)?A():void 0)}}(this)),g.change(function(e){return function(){var n,i,a;return n=g.val(),null==(null!=(i=e.data.constructors)?i[n]:void 0)?(o(n),w(),$(d).change()):(u(),S(e.tableForFunction(t,null,n)),y(),null!=(null!=(a=e.history.states[t])?a.command:void 0)?A():void 0)}}(this)),g.change(),x=function(e){return function(n){var i,a,r,o,l,s,c;for(null==n&&(n=!1);null!=v.nextSibling;)v.parentNode.removeChild(v.nextSibling);for(n&&v.parentNode.removeChild(v),a=e.history.states.length,r=n?t-1:t,i=o=r;a>=r?a>o:o>a;i=a>=r?++o:--o)i>0&&e.div.appendChild(e.history.states[i].element),e.div.appendChild(e.createCommandUI(i+1)),a>i+1&&(e.restoreSelects(i+1),e.writeAll(i+1));for(c=[],i=l=s=r+1;a>=s?a>l:l>a;i=a>=s?++l:--l)$("#apply-button-"+i,e.div).hide(),c.push($("#cancel-button-"+i,e.div).hide());return c}}(this),l=this.div.ownerDocument.createElement("div"),l.style["float"]="right",l.innerHTML="<button type='button' id='delete-command-"+t+"' class='btn btn-danger btn-sm'><span class='glyphicon glyphicon-remove'></span></button><button type='button' id='duplicate-command-"+t+"' class='btn btn-default btn-sm'><span class='glyphicon glyphicon-plus'></span></button>",v.insertBefore(l,v.childNodes[0]),i=l.childNodes[0],$(i).click(function(e){return function(){return e.history.deleteAction(t),x(!0),e.updatePermalinkElement()}}(this)),$(i).hide(),r=l.childNodes[1],$(r).click(function(e){return function(){return e.history.duplicateAction(t),x(),e.updatePermalinkElement()}}(this)),$(r).hide(),$("#apply-button-"+t,v).click(function(e){return function(){var n,o,l,u,h,m,p,f,v,b;n=g.val(),o=f=null,(m=e.data.constructors[n])||(f=g.find(":selected").get(0).getAttribute("data-object-name"),m=e.data.members[n][$(d).val()]);try{b=e.readAll(t)}catch(y){return u=y,alert("Fix the errors, starting with:\n\n"+u)}return h=function(){var t,e,n,i;for(n=m.parameters,i=[],p=t=0,e=n.length;e>t;p=++t)v=n[p],i.push("object"===v.type?{name:b[p]}:{value:b[p]});return i}(),l=function(t,e,n){n.prototype=t.prototype;var i=new n,a=t.apply(i,e);return Object(a)===a?a:i}(e.Command,[f,m.call].concat(a.call(h)),function(){}),t===e.history.states.length?e.history.appendAction(l):e.history.changeAction(t,l),s(),c(),x(),e.updatePermalinkElement(),$(i).show(),$(r).show()}}(this)),$("#cancel-button-"+t,v).click(function(e){return function(){return e.restoreSelects(t),e.writeAll(t),s(),c()}}(this)),v)},APISandbox.handlePermalink=function(){var t,e,n,i,a,r,o;if(n=window.location.href.split("?")[1],""!==n&&null!==n&&(n=decodeURIComponent(n),""!==n&&null!==n)){try{JSON.parse(n)}catch(l){return void(t=l)}for(this.history.deserialize(n),o=this.history.states,e=a=0,r=o.length;r>a;e=++a)i=o[e],e>0&&(this.div.appendChild(i.element),this.div.appendChild(this.createCommandUI(e+1))),e<this.history.states.length-1&&(this.restoreSelects(e+1),this.writeAll(e+1)),$("#apply-button-"+e,this.div).hide(),$("#cancel-button-"+e,this.div).hide();return this.updatePermalinkElement()}},APISandbox.permalinkElement=function(){var t;return null==this._permalinkElement&&(t=this.div.ownerDocument.createElement("a"),t.setAttribute("href",""),t.innerHTML="Permalink",$(t).click(function(t){return function(){return window.location.href=t.permalink()}}(this)),this._permalinkElement=t),this._permalinkElement},APISandbox.updatePermalinkElement=function(){return this.permalinkElement().setAttribute("href",APISandbox.permalink())},APISandbox.clearElement=function(){var t;return t=this.div.ownerDocument.createElement("a"),t.setAttribute("href",window.location.href.split("?")[0]),t.innerHTML="Clear",t}}).call(this);
//# sourceMappingURL=app.min.js.map